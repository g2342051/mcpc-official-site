<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEMBERS | Creator Collective</title>
    <!-- 外部ライブラリの読み込み -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&family=Oswald:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #050505;
            --accent: #ffffff;
        }

        body {
            background-color: var(--bg-color);
            color: #fff;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            margin: 0;
            user-select: none;
        }

        .members-section {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            perspective: 2500px;
            position: relative;
            background-color: #050505;
        }

        /* 3Dステージ */
        .carousel-stage {
            position: relative;
            width: 100%;
            height: 55vh;
            display: flex;
            align-items: center;
            justify-content: center;
            transform-style: preserve-3d;
        }

        .member-card {
            position: absolute;
            width: 340px;
            aspect-ratio: 1 / 1;
            transform-style: preserve-3d;
            will-change: transform, opacity;
        }

        .card-inner {
            width: 100%;
            height: 100%;
            position: relative;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 40px 100px rgba(0,0,0,0.8);
            background: #111;
        }

        .card-inner img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* メンバー情報：中央時のみ表示 */
        .member-info {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 2.2rem;
            background: linear-gradient(to top, rgba(0,0,0,1) 0%, rgba(0,0,0,0.6) 70%, transparent 100%);
            z-index: 10;
            opacity: 0;
            transform: translateY(30px);
        }

        .member-role {
            font-size: 0.7rem;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            color: rgba(255,255,255,0.6);
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .member-name {
            font-family: 'Oswald', sans-serif;
            font-size: 2.8rem;
            line-height: 0.85;
            text-transform: uppercase;
            letter-spacing: -0.01em;
        }

        .blur-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.1);
            backdrop-filter: blur(0px);
            transition: all 1.2s cubic-bezier(0.2, 1, 0.3, 1);
            z-index: 5;
        }

        /* サイドメンバーの状態 */
        .is-not-center .blur-overlay {
            backdrop-filter: blur(2px);
            background: rgba(0,0,0,0.35);
        }

        .is-not-center img {
            filter: brightness(0.65);
        }

        /* コントロールパネル */
        .controls-wrapper {
            margin-top: 4rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
            z-index: 100;
        }

        .nav-buttons {
            display: flex;
            align-items: center;
            gap: 3rem;
        }

        .btn-nav {
            background: none;
            border: none;
            color: rgba(255,255,255,0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-nav:hover {
            color: #fff;
            transform: scale(1.1);
        }

        .btn-play {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.2, 1, 0.3, 1);
        }

        .btn-play:hover {
            background: rgba(255,255,255,1);
            color: #000;
            border-color: #fff;
        }

        .btn-play svg {
            width: 28px;
            height: 28px;
            fill: currentColor;
        }

        /* オートプレイ プログレスバー */
        .autoplay-progress {
            width: 180px;
            height: 2px;
            background: rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }

        .autoplay-progress-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0%;
            background: #fff;
        }

        .section-header {
            position: absolute;
            top: 8%;
            left: 5%;
            z-index: 100;
        }

        .section-bg-title {
            font-size: 15vw;
            font-weight: 900;
            line-height: 1;
            margin: 0;
            opacity: 0.02;
            pointer-events: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            white-space: nowrap;
            text-transform: uppercase;
        }

        @media (max-width: 768px) {
            .member-card { width: 280px; }
            .member-name { font-size: 2rem; }
            .nav-buttons { gap: 1.5rem; }
        }
    </style>
</head>
<body>

    <h1 class="section-bg-title">Collective</h1>

    <div class="members-section">
        <div class="section-header">
            <p class="text-[10px] tracking-[0.6em] mb-2 opacity-40 uppercase">Professional Talents</p>
            <h2 class="text-4xl font-black italic tracking-tighter">MEMBERS</h2>
        </div>

        <div class="carousel-stage" id="stage">
            <!-- JSで生成 -->
        </div>

        <div class="controls-wrapper">
            <div class="nav-buttons">
                <!-- PREV -->
                <button class="btn-nav" id="prevBtn" title="Previous">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                </button>

                <!-- PLAY/PAUSE -->
                <button class="btn-play" id="playBtn" title="Play / Pause">
                    <div id="playIcon">
                        <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    </div>
                    <div id="pauseIcon" style="display: none;">
                        <svg viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                    </div>
                </button>

                <!-- NEXT -->
                <button class="btn-nav" id="nextBtn" title="Next">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                </button>
            </div>

            <!-- Auto-play duration indicator -->
            <div class="autoplay-progress">
                <div class="autoplay-progress-fill" id="progressFill"></div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const MEMBERS = [
                { name: "SHINJI TAKAGI", role: "Creative Director", image: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&q=80" },
                { name: "EMILY WATANABE", role: "Art Director", image: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=800&q=80" },
                { name: "KENJI SATO", role: "Motion Designer", image: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=800&q=80" },
                { name: "YUKI TANAKA", role: "Sound Designer", image: "https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=800&q=80" },
                { name: "MARCUS LEE", role: "Lead Developer", image: "https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=800&q=80" },
                { name: "SARA JONSON", role: "UI/UX Designer", image: "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=800&q=80" },
                { name: "AKIRA ITO", role: "Photographer", image: "https://images.unsplash.com/photo-1488161628813-04466f872be2?w=800&q=80" },
                { name: "LISA CHEN", role: "Brand Stylist", image: "https://images.unsplash.com/photo-1517841905240-472988babdf9?w=800&q=80" },
                { name: "DAVID SMITH", role: "Copywriter", image: "https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?w=800&q=80" },
                { name: "HINA MORI", role: "Illustrator", image: "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=800&q=80" }
            ];

            const stage = document.getElementById('stage');
            const progressFill = document.getElementById('progressFill');
            const playBtn = document.getElementById('playBtn');
            const playIcon = document.getElementById('playIcon');
            const pauseIcon = document.getElementById('pauseIcon');
            
            const count = MEMBERS.length;
            const angleStep = 360 / count;
            
            let currentRotation = 0;
            let isPlaying = false;
            const AUTOPLAY_DURATION = 4000; // 4秒ごとに切り替え

            function init() {
                MEMBERS.forEach((member, i) => {
                    const card = document.createElement('div');
                    card.className = 'member-card';
                    card.innerHTML = `
                        <div class="card-inner">
                            <div class="blur-overlay"></div>
                            <img src="${member.image}" alt="${member.name}">
                            <div class="member-info">
                                <p class="member-role">${member.role}</p>
                                <h3 class="member-name">${member.name.split(' ').join('<br>')}</h3>
                            </div>
                        </div>
                    `;
                    stage.appendChild(card);
                });
                update(true);
            }

            function update(immediate = false) {
                const cards = document.querySelectorAll('.member-card');
                const radius = window.innerWidth > 768 ? 750 : 550;

                cards.forEach((card, i) => {
                    let cardAngle = (i * angleStep) + currentRotation;
                    let normalizedAngle = ((cardAngle + 180) % 360 + 360) % 360 - 180;
                    let radian = normalizedAngle * (Math.PI / 180);

                    const x = Math.sin(radian) * radius;
                    const z = Math.cos(radian) * radius - radius;
                    const rY = normalizedAngle * -1;

                    const distanceToCenter = Math.abs(normalizedAngle);
                    const isCenter = distanceToCenter < (angleStep / 4);
                    
                    const opacity = Math.max(0.1, 1 - Math.abs(normalizedAngle) / 85);
                    const scale = isCenter ? 1.15 : 0.8;

                    gsap.to(card, {
                        x: x,
                        z: z,
                        rotateY: rY,
                        opacity: opacity,
                        scale: scale,
                        duration: immediate ? 0 : 1.6,
                        ease: "power4.out",
                        overwrite: "auto"
                    });

                    const info = card.querySelector('.member-info');
                    if (isCenter) {
                        card.classList.remove('is-not-center');
                        gsap.to(info, { opacity: 1, y: 0, duration: 0.8, delay: 0.3, ease: "power2.out" });
                    } else {
                        card.classList.add('is-not-center');
                        gsap.to(info, { opacity: 0, y: 30, duration: 0.5, ease: "power2.in" });
                    }
                });
            }

            function handleManualTransition() {
                if (isPlaying) {
                    resetAutoplay();
                } else {
                    stopAutoplay();
                }
            }

            function next() {
                currentRotation -= angleStep;
                update();
                handleManualTransition();
            }

            function prev() {
                currentRotation += angleStep;
                update();
                handleManualTransition();
            }

            function togglePlay() {
                isPlaying = !isPlaying;
                if (isPlaying) {
                    playIcon.style.display = 'none';
                    pauseIcon.style.display = 'block';
                    startAutoplay();
                } else {
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                    stopAutoplay();
                }
            }

            function startAutoplay() {
                gsap.set(progressFill, { width: "0%" });
                gsap.to(progressFill, {
                    width: "100%",
                    duration: AUTOPLAY_DURATION / 1000,
                    ease: "none",
                    onComplete: () => {
                        next();
                    }
                });
            }

            function stopAutoplay() {
                gsap.killTweensOf(progressFill);
                gsap.to(progressFill, { width: "0%", duration: 0.2 });
            }

            function resetAutoplay() {
                gsap.killTweensOf(progressFill);
                startAutoplay();
            }

            document.getElementById('nextBtn').addEventListener('click', next);
            document.getElementById('prevBtn').addEventListener('click', prev);
            playBtn.addEventListener('click', togglePlay);

            window.addEventListener('resize', () => update(true));

            init();
        });
    </script>
</body>
</html>